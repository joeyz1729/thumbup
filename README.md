# thumbup

用户对视频添加点赞动作操作，需要用户id，视频id以及点赞动作的类型。点赞动作逻辑中，
首先需要在 thumbup 服务中上锁检查是否重复操作，如果有效则异步发送到消息队列中处理。
在消息队列处理点赞请求时，首先要添加关系，其次还要更新 user 的点赞计数，video 的被点赞数量
以及 author 的作品被点赞数量，更新计数要分别对 user 服务和 video 服务进行 rpc 调用。

# 主要需要解决的问题

* 数据一致性问题
* 异步操作保证精确一次
* 异步操作失败重试机制
* 点赞请求时查询与更新的原子性
* 添加关系与更新计数的原子性